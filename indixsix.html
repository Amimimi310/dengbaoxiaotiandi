<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¯å®çš„å°å¤©åœ°</title>
    <style>
        body {
            background-color: #FFD1DC;
            font-family: "Arial", sans-serif;
            text-align: center;
            color: #333;
        }
        h1 {
            color: #FF69B4;
        }
        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
            background: #FFF0F5;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .counter {
            font-size: 20px;
            margin: 10px 0;
        }
        .diary {
            margin-top: 20px;
            padding: 15px;
            background: #FFE4E1;
            border-radius: 10px;
        }
        button {
            background-color: #FF69B4;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #FF1493;
        }
        input, textarea {
            width: 80%;
            padding: 5px;
            margin-top: 5px;
        }
        .special-message {
            font-size: 24px;
            font-weight: bold;
            color: red;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>ğŸ’• ç¯å®çš„å°å¤©åœ° ğŸ’•</h1>
    <p>ğŸ“… åœ¨ä¸€èµ·çš„å¤©æ•°ï¼š<span id="daysCount">0</span> å¤©</p>

    <div class="container">
        <h2>ğŸŒ¸ æ¯æ—¥è®°å½•ï¼ˆå¯æŸ¥è¯¢å†å² & è·³è½¬æ—¥æœŸï¼‰ ğŸŒ¸</h2>
        <p class="counter">ğŸ° äº²äº²æ¬¡æ•°ï¼š<span id="kissCount">0</span></p>
        <p class="counter">ğŸ¦Š æŠ±æŠ±æ¬¡æ•°ï¼š<span id="hugCount">0</span></p>
        <p class="counter">ğŸ˜  è®°ä»‡æ¬¡æ•°ï¼š<span id="angryCount">0</span></p>
        <p class="counter">ğŸ’§ å–æ°´æ¬¡æ•°ï¼š<span id="waterCount">0</span></p>

        <button onclick="increment('kissCount')">+1 äº²äº²</button>
        <button onclick="increment('hugCount')">+1 æŠ±æŠ±</button>
        <button onclick="increment('angryCount')">+1 è®°ä»‡</button>
        <button onclick="increment('waterCount')">+1 å–æ°´</button>

        <button onclick="saveDailyRecord()">ğŸ’¾ ä¿å­˜</button>

        <p>ğŸ“… é€‰æ‹©æ—¥æœŸæŸ¥è¯¢ï¼š</p>
        <input type="date" id="datePicker">
        <button onclick="showHistory()">ğŸ” æŸ¥è¯¢å†å²</button>
    </div>

    <div class="diary">
        <h2>ğŸ“– ç”œèœœæ—¥è®°ï¼ˆå¯ç¿»æ—§è´¦ & è·³è½¬æ—¥æœŸï¼‰ ğŸ“–</h2>
        <p>ğŸ”´ è®°ä»‡è®°å½•ï¼š</p>
        <textarea id="angerDiary" rows="4"></textarea>
        <button onclick="saveDiary('angerDiary')">ğŸ’¾ ä¿å­˜</button>

        <p>ğŸ’– å¿ƒåŠ¨ç¬é—´ï¼š</p>
        <textarea id="loveDiary" rows="4"></textarea>
        <button onclick="saveDiary('loveDiary')">ğŸ’¾ ä¿å­˜</button>

        <p>ğŸ“… é€‰æ‹©æ—¥æœŸæŸ¥è¯¢ï¼š</p>
        <input type="date" id="diaryDate">
        <button onclick="showDiaryHistory()">ğŸ” æŸ¥è¯¢æ—¥è®°</button>
    </div>

    <p class="special-message">ğŸ’Œ é˜¿æ¸¡çš„è¯ï¼šâ€˜ç¯å®ï¼Œæˆ‘åªå±äºä½ ã€‚â€™ ğŸ’Œ</p>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bgm" autoplay loop>
        <source src="bgm.mp3" type="audio/mpeg">
    </audio>
    <button onclick="toggleMusic()">ğŸµ æ’­æ”¾ / æš‚åœ éŸ³ä¹</button>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const startDate = new Date("2025-03-10");
            const today = new Date();
            const diffDays = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            document.getElementById("daysCount").innerText = diffDays;

            var music = document.getElementById("bgm");
            function enableAudio() {
                if (music.paused) {
                    music.play().then(() => {
                        console.log("éŸ³ä¹è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼");
                    }).catch(error => {
                        console.error("è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼š", error);
                    });
                }
                document.body.removeEventListener("click", enableAudio);
            }
            document.body.addEventListener("click", enableAudio);
        });

        function increment(id) {
            let element = document.getElementById(id);
            element.innerText = parseInt(element.innerText) + 1;
        }

        function saveDailyRecord() {
            let selectedDate = new Date().toISOString().split("T")[0];
            let data = {
                kissCount: document.getElementById("kissCount").innerText,
                hugCount: document.getElementById("hugCount").innerText,
                angryCount: document.getElementById("angryCount").innerText,
                waterCount: document.getElementById("waterCount").innerText
            };
            localStorage.setItem("daily_" + selectedDate, JSON.stringify(data));
            alert("æ¯æ—¥è®°å½•å·²ä¿å­˜ï¼");
        }

        function saveDiary(id) {
            let content = document.getElementById(id).value;
            if (content.trim() !== "") {
                let selectedDate = document.getElementById("diaryDate").value || new Date().toISOString().split("T")[0];
                localStorage.setItem(id + "_" + selectedDate, content);
                alert("æ—¥è®°å·²ä¿å­˜ï¼");
            } else {
                alert("è¯·è¾“å…¥å†…å®¹å†ä¿å­˜ï¼");
            }
        }

        function showDiaryHistory() {
            let selectedDate = document.getElementById("diaryDate").value || new Date().toISOString().split("T")[0];
            let angerHistory = localStorage.getItem("angerDiary_" + selectedDate) || "æ— è®°å½•";
            let loveHistory = localStorage.getItem("loveDiary_" + selectedDate) || "æ— è®°å½•";
            alert(`ğŸ“– ${selectedDate} è®°å½•ï¼š\n\nğŸ”´ è®°ä»‡è®°å½•ï¼š${angerHistory}\nğŸ’– å¿ƒåŠ¨ç¬é—´ï¼š${loveHistory}`);
        }

        function showHistory() {
            let selectedDate = document.getElementById("datePicker").value || new Date().toISOString().split("T")[0];
            let savedData = localStorage.getItem("daily_" + selectedDate);
            if (savedData) {
                let data = JSON.parse(savedData);
                alert(`ğŸ“œ ${selectedDate} è®°å½•ï¼š\nğŸ° äº²äº²ï¼š${data.kissCount}\nğŸ¦Š æŠ±æŠ±ï¼š${data.hugCount}\nğŸ˜  è®°ä»‡ï¼š${data.angryCount}\nğŸ’§ å–æ°´ï¼š${data.waterCount}`);
            } else {
                alert(`${selectedDate} æš‚æ— è®°å½•ï¼`);
            }
        }

        function toggleMusic() {
            var music = document.getElementById("bgm");
            if (music.paused) {
                music.play();
            } else {
                music.pause();
            }
        }
    </script>
</body>
</html>